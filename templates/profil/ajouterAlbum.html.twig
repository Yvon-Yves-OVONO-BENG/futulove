{% extends 'base.html.twig' %}

{% block title %}
    {% if slug is not null %}
        {% trans %}Modification de l'album{% endtrans %} - {{ album.titreAlbum }}
        {% else %}
        {% trans %}Création d'un album{% endtrans %}
    {% endif %}
    {% trans %}site de rencontre sérieux des célibataires - Futulove{% endtrans %}
{% endblock %}

{% block body %}
    <!-- breadcrumb section start -->
    <section class="breadcrumb_section">
        <div class="container">
            <div class="row">
                <div class="breadcrumb_content">
                    <div class="row">
                        <div class="col-xl-12 col-lg-12">
                            <div class="breadcrumb_heading">
                                <h2>
                                    {% if slug is not null %}
                                        {% trans %}Modification de l'album{% endtrans %} - {{ album.titreAlbum }}
                                        {% else %}
                                        {% trans %}Création d'un album{% endtrans %}
                                    {% endif %}
                                </h2>
                                <p class="text-white mt-3">{% trans %}Ajouter de la couleur à votre profil avec un album photo{% endtrans %}</p>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6">
                            <div class="breadcrumb_list">
                                <ul class="d-flex list-unstyled p-0 m-0">
                                    <li><a href="{{ path ('accueil')}}">{% trans %}Accueil{% endtrans %}</a></li>
                                    <li>
                                        <div class="scrolldown-btn">
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px"
                                                height="50px" viewBox="0 0 50 80" enable-background="new 0 0 50 80"
                                                xml:space="preserve">
                                                <path class="first-path" fill="#ff1182"
                                                    d="M24.752,79.182c-0.397,0-0.752-0.154-1.06-0.463L2.207,57.234c-0.306-0.305-0.458-0.656-0.458-1.057                  s0.152-0.752,0.458-1.059l2.305-2.305c0.309-0.309,0.663-0.461,1.06-0.461c0.398,0,0.752,0.152,1.061,0.461l18.119,18.119                  l18.122-18.119c0.306-0.309,0.657-0.461,1.057-0.461c0.402,0,0.753,0.152,1.059,0.461l2.306,2.305                  c0.308,0.307,0.461,0.658,0.461,1.059s-0.153,0.752-0.461,1.057L25.813,78.719C25.504,79.027,25.15,79.182,24.752,79.182z">
                                                </path>
                                                <path class="second-path" fill="#ff1182"
                                                    d="M24.752,58.25c-0.397,0-0.752-0.154-1.06-0.463L2.207,36.303c-0.306-0.304-0.458-0.655-0.458-1.057                  c0-0.4,0.152-0.752,0.458-1.058l2.305-2.305c0.309-0.308,0.663-0.461,1.06-0.461c0.398,0,0.752,0.153,1.061,0.461l18.119,18.12                  l18.122-18.12c0.306-0.308,0.657-0.461,1.057-0.461c0.402,0,0.753,0.153,1.059,0.461l2.306,2.305                  c0.308,0.306,0.461,0.657,0.461,1.058c0,0.401-0.153,0.753-0.461,1.057L25.813,57.787C25.504,58.096,25.15,58.25,24.752,58.25z">
                                                </path>
                                            </svg>
                                        </div>
                                    </li>
                                    <li>
                                        {% if slug is not null %}
                                            {% trans %}Modification de l'album{% endtrans %} - {{ album.titreAlbum }}
                                            {% else %}
                                            {% trans %}Création d'un album{% endtrans %}
                                        {% endif %}
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- breadcrumb section end -->

    <!-- blog section start -->
    <section class="py-5 blog_section">
        <div class="container">
            <div class="row">
                <div class="col-xl-8 col-lg-8 col-md-7">
                    <div class="blog_wrapper">
                        
                        <div class="create-post mt-1 pb-4 pt-0">
                            <div class="info-card-title px-4">
                                <h6 class="m-0">
                                {% if slug is not null %}
                                    {% trans %}Modification de l'album{% endtrans %} : {{ album.titreAlbum }}
                                    {% else %}
                                    {% trans %}Création album{% endtrans %}
                                {% endif %}
                                </h6>
                            </div>
                            <div class="leave_comment_box px-4 mt-4">
                                {{ form_start(formAlbum, {'attr': {'class':'row g-4 needs-validation', 'novalidate':""}})}}
                            
                                    <div class="row mb-1">
                                        <div class="col-md-8" style="margin-bottom: 15px !important;">
                                            <div class="form-group">
                                                {{ form_row(formAlbum.titreAlbum) }}
                                            </div>
                                        </div>
                                        <div class="col-md-4" style="margin-bottom: 15px !important;">
                                            <div class="form-group">
                                                {{ form_row(formAlbum.typeAlbum) }}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="form-group">
                                                {# {{ form_label(formAlbum.photos) }} #}
                                                <div id="photos-collection" data-prototype="{{ form_widget(formAlbum.photoAlbums.vars.prototype)|e('html_attr') }}">
                                                    {% for photo in formAlbum.photoAlbums %}
                                                        <div class="photo-entree" 
                                                            style="display: block !important;">
                                                            {{ form_widget(formAlbum.photoAlbums, {'attr': {'class': 'form-control form-control-sm'}}) }}
                                                            <button type="button" class="btn btn-danger btn-sm supprimer-photo">{% trans %}Supprimer{% endtrans %}</button>
                                                        </div>
                                                    {% endfor %}
                                                    
                                                </div>
                                                {{ form_errors(formAlbum.photoAlbums) }}
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group" >
                                                <button type="button" class="btn btn-primary btn-sm" id="ajout-photo"><i class="fa fa-plus me-2"></i>{% trans %}Ajouter une photo{% endtrans %}</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="main_btn">
                                        <button type="submit" class="main_btn">
                                            {% if slug is not null %}
                                                {% trans %}Je modifie mon album{% endtrans %}
                                                {% else %}
                                                {% trans %}Je crée mon album{% endtrans %}
                                            {% endif %}
                                        </button>
                                        <div class="scrolldown-btn">
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px"
                                                height="50px" viewBox="0 0 50 80" enable-background="new 0 0 50 80"
                                                xml:space="preserve">
                                                <path class="first-path" fill="#000"
                                                    d="M24.752,79.182c-0.397,0-0.752-0.154-1.06-0.463L2.207,57.234c-0.306-0.305-0.458-0.656-0.458-1.057                  s0.152-0.752,0.458-1.059l2.305-2.305c0.309-0.309,0.663-0.461,1.06-0.461c0.398,0,0.752,0.152,1.061,0.461l18.119,18.119                  l18.122-18.119c0.306-0.309,0.657-0.461,1.057-0.461c0.402,0,0.753,0.152,1.059,0.461l2.306,2.305                  c0.308,0.307,0.461,0.658,0.461,1.059s-0.153,0.752-0.461,1.057L25.813,78.719C25.504,79.027,25.15,79.182,24.752,79.182z">
                                                </path>
                                                <path class="second-path" fill="#000"
                                                    d="M24.752,58.25c-0.397,0-0.752-0.154-1.06-0.463L2.207,36.303c-0.306-0.304-0.458-0.655-0.458-1.057                  c0-0.4,0.152-0.752,0.458-1.058l2.305-2.305c0.309-0.308,0.663-0.461,1.06-0.461c0.398,0,0.752,0.153,1.061,0.461l18.119,18.12                  l18.122-18.12c0.306-0.308,0.657-0.461,1.057-0.461c0.402,0,0.753,0.153,1.059,0.461l2.306,2.305                  c0.308,0.306,0.461,0.657,0.461,1.058c0,0.401-0.153,0.753-0.461,1.057L25.813,57.787C25.504,58.096,25.15,58.25,24.752,58.25z">
                                                </path>
                                            </svg>
                                        </div>
                                    </div>
                                {{ form_end(formAlbum)}}

                                {# Mon javascript pour gérer l'ajout des photo  #}
                                <script>
                                    document.getElementById('ajout-photo').addEventListener('click', function () {
                                        var collectionHolder = document.getElementById('photos-collection');
                                        var newForm = collectionHolder.dataset.prototype.replace(/__name__/g, collectionHolder.children.length);

                                        var newDiv = document.createElement('div');
                                        newDiv.classList.add('photo-entree');
                                        newDiv.innerHTML = newForm + '<button type="button" class="btn btn-danger btn-sm supprimer-photo">{% trans %}Supprimer{% endtrans %}</button>';
                                        collectionHolder.appendChild(newDiv);

                                        //ajoutBoutonSupprimer(newDiv.querySelector('.supprimer-photo'));
                                        ajoutBoutonSupprimer();
                                    });

                                    function ajoutBoutonSupprimer() {
                                        document.querySelectorAll('.supprimer-photo').forEach(function (bouton) {
                                            bouton.addEventListener('click', function () {
                                            bouton.closest('.photo-entree').remove();
                                            });
                                        });
                                        
                                    }

                                    //document.querySelectorAll('.supprimer-photo').forEach(function (bouton) {
                                    //    ajoutBoutonSupprimer(bouton);
                                    //});
                                    ajoutBoutonSupprimer()
                                </script>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-md-5">
                    <aside>
                        {% include "includes/_album.html.twig" %}
                        {# {% include "includes/_actualite.html.twig" %} #}

                    </aside>
                </div>
            </div>
        </div>
    </section>
    <!-- blog section end -->
<script src="{{ asset ('js/supprimerPhotoTemoignage.js')}}"></script>
{% endblock %}
